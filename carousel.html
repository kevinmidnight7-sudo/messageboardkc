<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<title>Active Members Carousel</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet"/>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
<style>
html, body {
height:100%; margin:0; padding:0;
display:flex; align-items:center; justify-content:center;
background:transparent;
font-family:'Poppins',sans-serif;
overflow:hidden;
}
/* Semiâ€‘transparent black square */
#carousel-square {
width:200px; height:90px;
background: rgba(0,0,0,0.5);
display:flex; flex-direction:column;
align-items:center; justify-content:start;
padding-top:10px;
box-sizing:border-box;
border-radius:8px;
}
#carousel-square h3 {
margin:0; padding:0; font-size:1rem; color:#fff;
text-align:center; width:100%;
}
/* Carousel viewport */
#carousel {
width:100%; height:2em;
position:relative; overflow:hidden;
margin-top:10px;
}
/* Each name */
.item {
position:absolute; width:100%;
opacity:0; transform:translateY(20px);
transition:opacity 0.6s ease, transform 0.6s ease;
background-clip:text; -webkit-background-clip:text;
color:transparent;
font-size:1rem; font-weight:600; text-align:center;
}
.item.active {
opacity:1; transform:translateY(0);
}
</style>
</head>
<body>

<div id="carousel-square">
<h3>Registered Members:</h3>
<div id="carousel"></div>
</div>

<script>
// --- Firebase Setup ---
const cfg = {
apiKey: "AIzaSyBHKsULqmWPFaU7bNXDp6pBZHO4p9ZiUUo",
authDomain: "kckillerscompany-ab1ec.firebaseapp.com",
databaseURL: "https://kckillerscompany-ab1ec-default-rtdb.europe-west1.firebasedatabase.app",
projectId: "kckillerscompany-ab1ec",
storageBucket: "kckillerscompany-ab1ec.firebasedatabase.app",
messagingSenderId: "198711213988",
appId: "1:198711213988:web:f3cacc413ac9e80dd8cb31",
measurementId: "G-4LKP2M3JXE"
};
firebase.initializeApp(cfg);
const db = firebase.database();

// --- Carousel Logic ---
const carousel = document.getElementById('carousel');

// Generate 50 random gradients
const gradients = Array.from({ length: 50 }, () => {
const h1 = Math.floor(Math.random() * 360);
const h2 = (h1 + Math.floor(30 + Math.random() * 60)) % 360;
return `linear-gradient(90deg, hsl(${h1},70%,60%), hsl(${h2},70%,60%))`;
});

let items = [], idx = 0;

function showItem(i) {
items.forEach((el,j) => {
el.classList.toggle('active', j === i);
if (j === i) {
el.style.backgroundImage =
gradients[Math.floor(Math.random() * gradients.length)];
}
});
}

// Fetch user names
db.ref('users').once('value').then(snapshot => {
const names = [];
snapshot.forEach(child => {
const data = child.val();
if (data.displayName) names.push(data.displayName);
});
if (names.length === 0) names.push('No active members');

names.forEach(name => {
const div = document.createElement('div');
div.className = 'item';
div.textContent = name;
carousel.appendChild(div);
});

items = carousel.querySelectorAll('.item');
showItem(0);
setInterval(() => {
idx = (idx + 1) % items.length;
showItem(idx);
}, 2000);
});
</script>

</body>
</html>
